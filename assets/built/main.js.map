{"version":3,"sources":["main.js"],"names":["jQuery","$","length","fitVids","progressBar","document","querySelector","header","title","lastScrollY","window","scrollY","lastWindowHeight","innerHeight","lastDocumentHeight","height","ticking","requestTick","requestAnimationFrame","update","trigger","getBoundingClientRect","top","triggerOffset","offsetHeight","progressMax","classList","add","remove","setAttribute","addEventListener","passive"],"mappings":"AAIAA,OAAO,SAASC,GAEZ,GAAGA,EAAE,gBAAgBC,OAAO,CAELD,EAAE,sBACRE,UAGb,IAAIC,EAAcC,SAASC,cAAc,qBACrCC,EAASF,SAASC,cAAc,oBAChCE,EAAQH,SAASC,cAAc,oBAE/BG,EAAcC,OAAOC,QACrBC,EAAmBF,OAAOG,YAC1BC,EAAqBb,EAAEI,UAAUU,SACjCC,GAAU,EAad,SAASC,IACAD,GACDE,sBAAsBC,GAE1BH,GAAU,EAGd,SAASG,IACL,IAAIC,EAAUZ,EAAMa,wBAAwBC,IAAMZ,OAAOC,QACrDY,EAAgBf,EAAMgB,aAAe,GACrCC,EAAcX,EAAqBF,EAGpBQ,EAAUG,GAAzBd,EACAF,EAAOmB,UAAUC,IAAI,mBAErBpB,EAAOmB,UAAUE,OAAO,mBAG5BxB,EAAYyB,aAAa,MAAOJ,GAChCrB,EAAYyB,aAAa,QAASpB,GAElCO,GAAU,EAGdN,OAAOoB,iBAAiB,SApCxB,WACIrB,EAAcC,OAAOC,QACrBM,KAkCwC,CAACc,SAAS,IACtDrB,OAAOoB,iBAAiB,SAhCxB,WACIlB,EAAmBF,OAAOG,YAC1BC,EAAqBb,EAAEI,UAAUU,SACjCE,MA6BwC,GAE5CE","file":"main.js","sourcesContent":["// NOTE: Scroll performance is poor in Safari\n// - this appears to be due to the events firing much more slowly in Safari.\n//   Dropping the scroll event and using only a raf loop results in smoother\n//   scrolling but continuous processing even when not scrolling\njQuery(function($) {\n\n    if($(\".single-post\").length){\n        // Start fitVids\n        var $postContent = $(\".post-full-content\");\n        $postContent.fitVids();\n        // End fitVids\n\n        var progressBar = document.querySelector('#reading-progress');\n        var header = document.querySelector('.floating-header');\n        var title = document.querySelector('.post-full-title');\n\n        var lastScrollY = window.scrollY;\n        var lastWindowHeight = window.innerHeight;\n        var lastDocumentHeight = $(document).height();\n        var ticking = false;\n\n        function onScroll() {\n            lastScrollY = window.scrollY;\n            requestTick();\n        }\n\n        function onResize() {\n            lastWindowHeight = window.innerHeight;\n            lastDocumentHeight = $(document).height();\n            requestTick();\n        }\n\n        function requestTick() {\n            if (!ticking) {\n                requestAnimationFrame(update);\n            }\n            ticking = true;\n        }\n\n        function update() {\n            var trigger = title.getBoundingClientRect().top + window.scrollY;\n            var triggerOffset = title.offsetHeight + 35;\n            var progressMax = lastDocumentHeight - lastWindowHeight;\n\n            // show/hide floating header\n            if (lastScrollY >= trigger + triggerOffset) {\n                header.classList.add('floating-active');\n            } else {\n                header.classList.remove('floating-active');\n            }\n\n            progressBar.setAttribute('max', progressMax);\n            progressBar.setAttribute('value', lastScrollY);\n\n            ticking = false;\n        }\n\n        window.addEventListener('scroll', onScroll, {passive: true});\n        window.addEventListener('resize', onResize, false);\n\n        update();\n    }\n\n});"]}