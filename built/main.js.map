{"version":3,"sources":["main.js"],"names":["jQuery","$","on","toggleClass","one","focus","document","keyup","e","keyCode","css","removeClass","length","fitVids","progressBar","querySelector","header","title","lastScrollY","window","scrollY","lastWindowHeight","innerHeight","lastDocumentHeight","height","ticking","requestTick","requestAnimationFrame","update","trigger","getBoundingClientRect","top","triggerOffset","offsetHeight","progressMax","classList","add","remove","setAttribute","addEventListener","passive"],"mappings":"AAIAA,OAAO,SAASC,GA6BZ,GA1BAA,EAAG,kBAAmBC,GAAI,QAAS,WAE/BD,EAAE,mBAAmBE,YAAY,0BAGjCF,EAAE,mBAAmBG,IAAI,gBAAiB,WACtCH,EAAG,iBAAkBI,YAI7BJ,EAAG,yBAA0BC,GAAI,QAAS,WAEtCD,EAAE,mBAAmBE,YAAY,4BAIrCF,EAAEK,UAAUC,MAAM,SAASC,GACN,IAAbA,EAAEC,SAEyC,GAAvCR,EAAE,mBAAmBS,IAAI,YAEzBT,EAAE,mBAAmBU,YAAY,4BAK1CV,EAAE,gBAAgBW,OAAO,CAELX,EAAE,sBACRY,UAGb,IAAIC,EAAcR,SAASS,cAAc,qBACrCC,EAASV,SAASS,cAAc,oBAChCE,EAAQX,SAASS,cAAc,oBAE/BG,EAAcC,OAAOC,QACrBC,EAAmBF,OAAOG,YAC1BC,EAAqBtB,EAAEK,UAAUkB,SACjCC,GAAU,EAad,SAASC,IACAD,GACDE,sBAAsBC,GAE1BH,GAAU,EAGd,SAASG,IACL,IAAIC,EAAUZ,EAAMa,wBAAwBC,IAAMZ,OAAOC,QACrDY,EAAgBf,EAAMgB,aAAe,GACrCC,EAAcX,EAAqBF,EAGpBQ,EAAUG,GAAzBd,EACAF,EAAOmB,UAAUC,IAAI,mBAErBpB,EAAOmB,UAAUE,OAAO,mBAG5BvB,EAAYwB,aAAa,MAAOJ,GAChCpB,EAAYwB,aAAa,QAASpB,GAElCO,GAAU,EAGdN,OAAOoB,iBAAiB,SApCxB,WACIrB,EAAcC,OAAOC,QACrBM,KAkCwC,CAACc,SAAS,IACtDrB,OAAOoB,iBAAiB,SAhCxB,WACIlB,EAAmBF,OAAOG,YAC1BC,EAAqBtB,EAAEK,UAAUkB,SACjCE,MA6BwC,GAE5CE","file":"main.js","sourcesContent":["// NOTE: Scroll performance is poor in Safari\n// - this appears to be due to the events firing much more slowly in Safari.\n//   Dropping the scroll event and using only a raf loop results in smoother\n//   scrolling but continuous processing even when not scrolling\njQuery(function($) {\n\n    /* search overlay */\n    $( \".search-button\" ).on( \"click\", function() {\n        //toggle search overlay\n        $('.search-overlay').toggleClass('search-overlay-visible');\n\n        //on transitionend focus on search field\n        $('.search-overlay').one('transitionend', function() {\n            $( '.search-field' ).focus();\n        });\n    });\n\n    $( \".search-overlay-close\" ).on( \"click\", function() {\n        //toggle search overlay\n        $('.search-overlay').toggleClass('search-overlay-visible');\n    });\n\n    //close search overlay on esc key\n    $(document).keyup(function(e) {\n        if (e.keyCode == 27) {\n            //check if search overlay is open\n            if( $('.search-overlay').css('opacity') == 1 ){\n                //hide search overlay\n                $('.search-overlay').removeClass('search-overlay-visible');\n            }\n        }\n    });\n\n    if($(\".single-post\").length){\n        // Start fitVids\n        var $postContent = $(\".post-full-content\");\n        $postContent.fitVids();\n        // End fitVids\n\n        var progressBar = document.querySelector('#reading-progress');\n        var header = document.querySelector('.floating-header');\n        var title = document.querySelector('.post-full-title');\n\n        var lastScrollY = window.scrollY;\n        var lastWindowHeight = window.innerHeight;\n        var lastDocumentHeight = $(document).height();\n        var ticking = false;\n\n        function onScroll() {\n            lastScrollY = window.scrollY;\n            requestTick();\n        }\n\n        function onResize() {\n            lastWindowHeight = window.innerHeight;\n            lastDocumentHeight = $(document).height();\n            requestTick();\n        }\n\n        function requestTick() {\n            if (!ticking) {\n                requestAnimationFrame(update);\n            }\n            ticking = true;\n        }\n\n        function update() {\n            var trigger = title.getBoundingClientRect().top + window.scrollY;\n            var triggerOffset = title.offsetHeight + 35;\n            var progressMax = lastDocumentHeight - lastWindowHeight;\n\n            // show/hide floating header\n            if (lastScrollY >= trigger + triggerOffset) {\n                header.classList.add('floating-active');\n            } else {\n                header.classList.remove('floating-active');\n            }\n\n            progressBar.setAttribute('max', progressMax);\n            progressBar.setAttribute('value', lastScrollY);\n\n            ticking = false;\n        }\n\n        window.addEventListener('scroll', onScroll, {passive: true});\n        window.addEventListener('resize', onResize, false);\n\n        update();\n    }\n\n});"]}